<!--Tag used: html, head, link, meta, title, style, script, body, h1, hr, nav, br, button,b, a, table, td, tr, p, footer, address-->
<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="./src/printstyle.css" type="text/css" media="print" />
    <link rel="stylesheet" href="./src/mobile.css" type="text/css" media="only screen and (max-width: 800px)"/>
     <link href="https://fonts.googleapis.com/css?family=PT+Serif" rel="stylesheet" type="text/css">
    <meta charset="utf-8">
    <meta name="viewport" content="width-device-width, initial-scale=1.0">
    <title>Issue Table</title>
    <style>
        body{
            font-family: 'PT Serif', serif;
        }
        table{
            width:100%;
            font-family: sans-serif;
        }
        tb,th,td{
            border:1px solid #dddddd;
            text-align: left;
            padding: 8px;
        }
        #bottom{
            text-align: right;
        }
        .close{
            background-color: lightgrey;
            font-style: italic;
        }
        
        .b{
            border: none !important;
            background-color: white;
        }
        input[type="submit"]{
            background-color: orangered;
            font-size: 20px;
        }
    </style>
    
    <script src="https://www.gstatic.com/firebasejs/5.3.0/firebase.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.6.2/firebase-database.js"></script>
    <script>
        // Initialize Firebase
        var config = {
            apiKey: "AIzaSyDylU22y4KBSC7NtdPcurxMu-1uJid67i0",
            authDomain: "bhw4-af7bc.firebaseapp.com",
            databaseURL: "https://bhw4-af7bc.firebaseio.com",
            projectId: "bhw4-af7bc",
            storageBucket: "",
            messagingSenderId: "435052500774"
        };
        firebase.initializeApp(config); 
        function addRow () {
            var table = document.getElementById('mytable');
            var index = table.rows.length;
            var newRow = table.insertRow(index);
            var newCell1 = newRow.insertCell(0);
            newCell1.id = 'newCell1';
            var newCell2 = newRow.insertCell(1);
            newCell2.id = 'newCell2';
            var newCell3 = newRow.insertCell(2);
            newCell3.id = 'newCell3';
            var newCell4 = newRow.insertCell(3);
            newCell4.id = 'newCell4';
            var newText = document.createTextNode(index); 
            newCell1.appendChild(newText);

            var nameInput = document.createElement('input');
            nameInput.type = 'file';
            nameInput.name = 'Upload file';
            nameInput.id = 'nameInput';
            newCell2.appendChild(nameInput);

            var typeInput = document.createElement('select');
            typeInput.id = 'typeInput';
            var option1 = document.createElement('option');
            var option2 = document.createElement('option');
            var option3 = document.createElement('option');
            var option4 = document.createElement('option');
            var option5 = document.createElement('option');
            option1.text = 'Feature';
            option2.text = 'Moderate';
            option3.text = 'Warning';
            option4.text = 'Error';
            option5.text = 'Severe';
            typeInput.add(option1);
            typeInput.add(option2);
            typeInput.add(option3);
            typeInput.add(option4);
            typeInput.add(option5);
            newCell3.appendChild(typeInput);
            var description = document.createElement('input');
            description.id = 'description';
            newCell4.appendChild(description);
            var save = document.createElement('input');
            save.className = 'save';
            save.type = 'button';
            save.value = 'Save';
            save.onclick = post;
            table.appendChild(save);
        }
    </script>
    <script>
        function logout(){
            var user = firebase.auth().currentUser;
            if(user){
            window.location="./index.html";
            firebase.auth().signOut().then(function() {
                
            }).catch(function(error) {
            
            });
            }
        }
       
        function deleteIssue(r){
            var x=confirm("If you want to delete the issue, confirm");
            if(x==true){
            var i = r.parentNode.parentNode.rowIndex;
            document.getElementById("mytable").deleteRow(i);
            }
        }

        
        function showOpen(){
            var open = document.getElementById("chop");
            if(open.checked){
                tooglepart(true);
            }else{    
               tooglepart(false);
            }
        }
        
        function tooglepart(on){
            var lst=document.getElementsByClassName("close");
            for (var i=0;i<lst.length;++i){
                lst[i].style.display=on?'none':'';    
            }  
        }
    </script>    
    </head>
    <body>
        <noscript>
            <p>Your browser doesn't support Javascript. Please enable for optimal view.</p>
        </noscript>
        <h1 id="top"><b>Issue List</b></h1>
            
        <hr>
        
        <button onclick="logout()">Log out</button>
        <button onclick="addRow()" style="float: left;">Add issue</button>
        <button style="float: left;">Edit issue</button>
        <input type="checkbox" id="chop" onchange="showOpen();"/>Open issues only<br>
        
        <div>
        <table id="mytable">
            <tr>
                <td>Issue Id</td>
                <td>Issue Name</td>
                <td>Issue Type</td>
                <td>Issue Description</td>
                <td class="b">&nbsp;</td>
            </tr>
            <tr id = "1" class="open" >
                <td>1</td>
                <td><a href="./new-issue.html">Not supported tag &lt;bdi&gt;</a></td>
                <td>Warning</td>
                <td>The tag is not suppported by all browsers</td>
                <td class="b"><input type="button" value="x" onclick="deleteIssue(this)"></td>            
                            
                </tr>
    
            <tr id="2" class="close">
                <td>2</td>
                <td><a href="./new-issue-2.html">Not valid encoding</a></td>
                <td>Error</td>
                <td>The character encoding was not declared when validating simple html file</td>
                <td class="b"><input type="button" value="x" onclick="deleteIssue(this)"></td>
            </tr>
                
            <tr id="3" class="close">
                <td >3</td>
                <td><a href="./new-issue-3.html">Can't load webP in browsers</a></td>
                <td>Error</td>
                <td>Uploading a webP image but browser does not support the image.</td>
                <td class="b"><input type="button" value="x" onclick="deleteIssue(this)"></td>
            </tr>
            
            <tr id="4" class="open">
                <td >4</td>
                    <td><a href="./new-issue-4.html">Media mobile doesn't support</a></td>
                <td>Error</td>
                <td>Validation error when uses a different style for mobile</td>
                <td class="b"><input type="button" value="x" onclick="deleteIssue(this)"></td>
            </tr>
            
            <tr id="5" class="close">
                <td >5</td>
                    <td><a href="./new-issue-5.html">Border element obsolate</a></td>
                <td>Error</td>
                <td>Validator finds it is obsolate when directly set border in &lt;table&gt;</td>
                <td class="b"><input type="button" value="x" onclick="deleteIssue(this)"></td>
            </tr>
            
        </table>
    </div>

           
                 
    <p id="bottom"><a  href="#top">go to top</a></p>
    <footer>
        <hr>
        Copyright: &copy; Group Neko
            <address>
                9600 Gilman Drive<br> 
                La Jolla, CA 92093<br>
            </address>
    </footer>
    </body>
</html>